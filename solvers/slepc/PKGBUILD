# Maintainer: Myles English <myles at rockhead dot biz>
pkgname=slepc
pkgver=3.0.0_p7
_config=linux-gnu-cxx-debug
pkgrel=1
pkgdesc="Scalable library for Eigenvalue problem computations"
arch=('i686' 'x86_64')
url="http://www.grycap.upv.es/slepc"
license=('GNUv3')
depends=('gcc' 'petsc')
install=slepc.install
source=(http://www.grycap.upv.es/slepc/download/distrib/${pkgname}-${pkgver/_/-}.tgz)
md5sums=('9a5da74c6cc2e48116619d5add242d84')

build() {
   cd ${srcdir}/${pkgname}-${pkgver/_/-}

   export SLEPC_DIR=${srcdir}/${pkgname}-${pkgver/_/-}
   unset PETSC_ARCH

   ./configure --prefix=${pkgdir}/usr/${_config} || return 1
   export PETSC_ARCH=${_config}
   make || return 1
   make install  || return 1
   unset PETSC_ARCH
   sed -i "s#${pkgdir}##g" "${pkgdir}/usr/${_config}/conf/slepcvariables"
   # file conflicts with petsc:
   #/usr/${_config}/include/finclude/index.html
   #/usr/${_config}/include/finclude/makefile.html

   # mkdir -p
   #${pkgdir}/etc/ld.so.conf.d echo "/usr/lib/${pkgname}" >
   #${pkgdir}/etc/ld.so.conf.d/${pkgname}.conf}
}
